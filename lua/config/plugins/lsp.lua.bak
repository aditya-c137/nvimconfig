return {
    {
        "neovim/nvim-lspconfig",
        config = function()
            vim.lsp.config('pylsp', {
                settings = {
                    pylsp = {
                        cmd = {
                            'uv',
                            'run',
                            '--with',
                            'python-lsp-server,python-lsp-isort,pylsp-rope,python-lsp-ruff,pylsp-mypy,pyls-memestra',
                            'pylsp'
                        },
                        configurationSources = { "flake8" },
                        plugins = {
                            -- Disable default linter
                            pyflakes = {
                                enabled = true,
                            },
                            pycodestyle = {
                                enabled = false,
                            },
                            mccabe = {
                                enabled = false,
                            },
                            -- Plugins configuration
                            flake8 = {
                                enabled = true,
                            },
                            isort = {
                                enabled = true,
                            },
                            jedi_completion = {
                                enabled = true,
                                fuzzy = true
                            },
                            ["pyls-memestra"] = {
                                enabled = true,
                                recursive = true
                            },
                            rope_autoimport = {
                                enabled = true
                            },
                        }
                    }
                }
            })
            vim.lsp.enable('pylsp')
        end
    }
}
